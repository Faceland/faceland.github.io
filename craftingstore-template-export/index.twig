{% extends 'base.twig' %}

{% block title %}{{ store.name }} - Home{% endblock %}

{% block content %}
<div class="py-4">
    <!-- Welcome Section -->
    <div class="card mb-4">
        <h1 class="card-title">Welcome to {{ store.name }}</h1>
        <p class="text-muted">{{ store.description|default('Browse our packages and support the server!')|raw }}</p>
    </div>

    <!-- Modules Row -->
    <div class="d-flex gap-2 mb-4" style="flex-wrap: wrap;">
        {% for module in modules %}
            <div style="flex: 1; min-width: 280px;">
                {% if module.type == 'serverstatus' %}
                    {% include 'modules/serverstatus.twig' with {module: module} %}
                {% elseif module.type == 'topdonator' %}
                    {% include 'modules/topdonator.twig' with {module: module} %}
                {% elseif module.type == 'donationgoal' %}
                    {% include 'modules/donationgoal.twig' with {module: module} %}
                {% elseif module.type == 'featuredpackage' %}
                    {% include 'modules/featuredpackage.twig' with {module: module} %}
                {% elseif module.type == 'giftcard' %}
                    {% include 'modules/giftcard.twig' with {module: module} %}
                {% elseif module.type == 'owntext' %}
                    {% include 'modules/owntext.twig' with {module: module} %}
                {% endif %}
            </div>
        {% endfor %}
    </div>

    <!-- Categories -->
    {% if categories|length > 0 %}
    <h2 class="mb-3">Categories</h2>
    <div class="category-grid mb-4">
        {% for category in categories %}
        <a href="{{ path('category', {slug: category.slug}) }}" class="category-card">
            {% if category.icon %}
            <div class="category-icon">
                <i class="{{ category.icon }}"></i>
            </div>
            {% endif %}
            <div class="category-name">{{ category.name }}</div>
        </a>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Featured Packages -->
    {% if featuredPackages|length > 0 %}
    <h2 class="mb-3">Featured Packages</h2>
    <div class="package-grid">
        {% for package in featuredPackages %}
        <a href="{{ path('package', {slug: package.slug}) }}" class="package-card">
            {% if package.image %}
            <img src="{{ package.image }}" alt="{{ package.name }}" class="package-image">
            {% endif %}
            <div class="package-content">
                <h3 class="package-title">{{ package.name }}</h3>
                <p class="package-description">{{ package.description|striptags|slice(0, 100) }}{% if package.description|length > 100 %}...{% endif %}</p>
                <div class="package-price">
                    {% if package.salePrice %}
                    <span class="package-price-old">{{ package.price|format_currency(store.currency) }}</span>
                    {{ package.salePrice|format_currency(store.currency) }}
                    {% else %}
                    {{ package.price|format_currency(store.currency) }}
                    {% endif %}
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endblock %}
